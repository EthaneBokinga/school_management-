/* ═══════════════════════════════════════════
   SYSTÈME DE THÈMES - SCHOOL MANAGER
   Sombre (défaut) et Clair
═══════════════════════════════════════════ */

/* ─── VARIABLES THÈME SOMBRE (défaut) ─── */
:root,
[data-theme="dark"] {
    --bg-primary:       #0D1117;
    --bg-secondary:     #1C2333;
    --bg-card:          #1C2333;
    --bg-sidebar:       #161B27;
    --bg-navbar:        rgba(13, 17, 23, 0.95);
    --bg-input:         #252D3D;
    --bg-hover:         rgba(255, 255, 255, 0.04);
    --bg-stripe:        rgba(255, 255, 255, 0.02);

    --text-primary:     #E8E2D9;
    --text-secondary:   #8B95A6;
    --text-muted:       #5A6478;
    --text-heading:     #F5F0E8;
    --text-nav:         #C8D0DC;

    --border:           rgba(201, 168, 76, 0.15);
    --border-soft:      rgba(255, 255, 255, 0.07);
    --border-input:     rgba(255, 255, 255, 0.10);

    --gold:             #C9A84C;
    --gold-lt:          #E2C97E;
    --gold-glow:        rgba(201, 168, 76, 0.12);

    --accent-teal:      #2DCECC;
    --accent-rose:      #F06595;

    --shadow-card:      0 4px 24px rgba(0, 0, 0, 0.4);
    --shadow-lg:        0 16px 48px rgba(0, 0, 0, 0.5);

    --success-bg:       rgba(28, 200, 138, 0.12);
    --success-text:     #1cc88a;
    --danger-bg:        rgba(231, 74, 59, 0.12);
    --danger-text:      #e74a3b;
    --warning-bg:       rgba(246, 194, 62, 0.12);
    --warning-text:     #f6c23e;
    --info-bg:          rgba(54, 185, 204, 0.12);
    --info-text:        #36b9cc;

    --scrollbar-track:  #1C2333;
    --scrollbar-thumb:  #3D4860;
}

/* ─── VARIABLES THÈME CLAIR ─── */
[data-theme="light"] {
    --bg-primary:       #F4F6F9;
    --bg-secondary:     #FFFFFF;
    --bg-card:          #FFFFFF;
    --bg-sidebar:       #1A2035;
    --bg-navbar:        rgba(255, 255, 255, 0.95);
    --bg-input:         #F0F2F5;
    --bg-hover:         rgba(0, 0, 0, 0.03);
    --bg-stripe:        rgba(0, 0, 0, 0.015);

    --text-primary:     #2D3748;
    --text-secondary:   #718096;
    --text-muted:       #A0AEC0;
    --text-heading:     #1A202C;
    --text-nav:         #E8E2D9;

    --border:           rgba(0, 0, 0, 0.08);
    --border-soft:      rgba(0, 0, 0, 0.06);
    --border-input:     rgba(0, 0, 0, 0.12);

    --gold:             #B8860B;
    --gold-lt:          #DAA520;
    --gold-glow:        rgba(184, 134, 11, 0.08);

    --accent-teal:      #0891B2;
    --accent-rose:      #E11D74;

    --shadow-card:      0 2px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg:        0 8px 32px rgba(0, 0, 0, 0.12);

    --success-bg:       #D1FAE5;
    --success-text:     #065F46;
    --danger-bg:        #FEE2E2;
    --danger-text:      #991B1B;
    --warning-bg:       #FEF3C7;
    --warning-text:     #92400E;
    --info-bg:          #DBEAFE;
    --info-text:        #1E40AF;

    --scrollbar-track:  #E2E8F0;
    --scrollbar-thumb:  #CBD5E0;
}

/* ════════════════════════════════════════════
   APPLICATION DES VARIABLES À TOUS LES ÉLÉMENTS
════════════════════════════════════════════ */

/* ─── BASE ─── */
html { transition: background-color 0.3s ease, color 0.3s ease; }

body {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* ─── SCROLLBAR ─── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--scrollbar-track); }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--gold); }

/* ─── NAVBAR ─── */
.navbar,
nav.navbar {
    background-color: var(--bg-navbar) !important;
    border-bottom: 1px solid var(--border-soft) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: background-color 0.3s ease;
}

.navbar-brand,
.navbar-brand * {
    color: var(--text-heading) !important;
}

.navbar .nav-link {
    color: var(--text-secondary) !important;
}

.navbar .nav-link:hover {
    color: var(--gold) !important;
}

/* ─── SIDEBAR ─── */
.sidebar,
#sidebar,
.sidebar-wrapper {
    background-color: var(--bg-sidebar) !important;
    border-right: 1px solid var(--border) !important;
    transition: background-color 0.3s ease;
}

.sidebar .nav-link {
    color: rgba(232, 226, 217, 0.75) !important;
    border-radius: 8px;
    transition: all 0.25s;
}

.sidebar .nav-link:hover,
.sidebar .nav-link.active {
    color: #ffffff !important;
    background: var(--gold-glow) !important;
}

.sidebar .nav-link.active {
    border-left: 2px solid var(--gold);
}

/* ─── CARDS ─── */
.card {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-soft) !important;
    box-shadow: var(--shadow-card) !important;
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

.card-header {
    background-color: var(--bg-card) !important;
    border-bottom: 1px solid var(--border-soft) !important;
    color: var(--text-heading) !important;
}

/* Garder les card-headers colorés (primary, success, etc.) */
.card-header.bg-primary,
.card-header.bg-success,
.card-header.bg-danger,
.card-header.bg-warning,
.card-header.bg-info,
.card-header.bg-dark,
.card-header.bg-secondary {
    border-bottom: none !important;
}

.card-body {
    color: var(--text-primary) !important;
}

.card:hover {
    box-shadow: var(--shadow-lg) !important;
    border-color: var(--border) !important;
}

/* ─── TEXTES ─── */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-heading) !important;
}

/* Garder les textes colorés des badges/buttons */
.text-white, .text-white * { color: #fff !important; }
.text-muted { color: var(--text-muted) !important; }
p { color: var(--text-primary); }
small { color: var(--text-secondary); }
label { color: var(--text-primary) !important; }

/* ─── TABLES ─── */
.table {
    color: var(--text-primary) !important;
    border-color: var(--border-soft) !important;
}

.table thead th {
    background-color: var(--bg-hover) !important;
    color: var(--text-secondary) !important;
    border-bottom: 1px solid var(--border-soft) !important;
    font-size: .78rem;
    letter-spacing: .06em;
    text-transform: uppercase;
}

.table td {
    border-color: var(--border-soft) !important;
    color: var(--text-primary) !important;
}

.table tbody tr:hover {
    background-color: var(--bg-hover) !important;
}

.table-striped tbody tr:nth-child(odd) {
    background-color: var(--bg-stripe) !important;
}

/* ─── FORMULAIRES ─── */
.form-control,
.form-select {
    background-color: var(--bg-input) !important;
    border: 1px solid var(--border-input) !important;
    color: var(--text-primary) !important;
    transition: border-color 0.25s, box-shadow 0.25s, background-color 0.3s;
}

.form-control:focus,
.form-select:focus {
    background-color: var(--bg-input) !important;
    border-color: var(--gold) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 0 0 3px var(--gold-glow) !important;
}

.form-control::placeholder {
    color: var(--text-muted) !important;
}

.input-group-text {
    background-color: var(--bg-input) !important;
    border-color: var(--border-input) !important;
    color: var(--text-secondary) !important;
}

/* ─── ALERTS ─── */
[data-theme="dark"] .alert-success {
    background-color: var(--success-bg) !important;
    color: var(--success-text) !important;
    border-color: rgba(28, 200, 138, 0.2) !important;
}

[data-theme="dark"] .alert-danger {
    background-color: var(--danger-bg) !important;
    color: var(--danger-text) !important;
    border-color: rgba(231, 74, 59, 0.2) !important;
}

[data-theme="dark"] .alert-warning {
    background-color: var(--warning-bg) !important;
    color: var(--warning-text) !important;
    border-color: rgba(246, 194, 62, 0.2) !important;
}

[data-theme="dark"] .alert-info {
    background-color: var(--info-bg) !important;
    color: var(--info-text) !important;
    border-color: rgba(54, 185, 204, 0.2) !important;
}

/* ─── DROPDOWNS ─── */
.dropdown-menu {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-soft) !important;
    box-shadow: var(--shadow-lg) !important;
}

.dropdown-item {
    color: var(--text-primary) !important;
    transition: background-color 0.2s;
}

.dropdown-item:hover {
    background-color: var(--bg-hover) !important;
    color: var(--gold) !important;
}

.dropdown-divider {
    border-color: var(--border-soft) !important;
}

/* ─── MODALS ─── */
.modal-content {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-soft) !important;
    box-shadow: var(--shadow-lg) !important;
}

.modal-header {
    border-bottom: 1px solid var(--border-soft) !important;
    background-color: var(--bg-card) !important;
}

.modal-footer {
    border-top: 1px solid var(--border-soft) !important;
    background-color: var(--bg-card) !important;
}

.modal-title { color: var(--text-heading) !important; }

.modal-backdrop { backdrop-filter: blur(4px); }

/* ─── PAGINATION ─── */
.pagination .page-link {
    background-color: var(--bg-card) !important;
    border-color: var(--border-soft) !important;
    color: var(--text-primary) !important;
    transition: all 0.2s;
}

.pagination .page-link:hover {
    background-color: var(--gold-glow) !important;
    color: var(--gold) !important;
    border-color: var(--gold) !important;
}

.pagination .page-item.active .page-link {
    background-color: var(--gold) !important;
    border-color: var(--gold) !important;
    color: #000 !important;
}

/* ─── LIST GROUPS ─── */
.list-group-item {
    background-color: var(--bg-card) !important;
    border-color: var(--border-soft) !important;
    color: var(--text-primary) !important;
    transition: background-color 0.2s;
}

.list-group-item:hover {
    background-color: var(--bg-hover) !important;
}

/* ─── TOASTS ─── */
.toast {
    box-shadow: var(--shadow-lg) !important;
}

/* ─── PROGRESS BAR ─── */
.progress {
    background-color: var(--bg-hover) !important;
}

/* ─── NAV TABS ─── */
.nav-tabs {
    border-bottom: 1px solid var(--border-soft) !important;
}

.nav-tabs .nav-link {
    color: var(--text-secondary) !important;
    border-color: transparent !important;
    transition: color 0.2s, border-color 0.2s;
}

.nav-tabs .nav-link:hover {
    color: var(--gold) !important;
    border-color: transparent !important;
}

.nav-tabs .nav-link.active {
    background-color: var(--bg-card) !important;
    color: var(--gold) !important;
    border-color: var(--border-soft) var(--border-soft) var(--bg-card) !important;
}

.tab-content .tab-pane.card {
    border-top: none !important;
    border-radius: 0 0 12px 12px !important;
}

/* ─── STAT CARDS DASHBOARD ─── */
.stat-card {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-soft) !important;
}

/* ─── PAGE HEADER ─── */
.page-header,
.content-header,
.card-page-title {
    color: var(--text-heading) !important;
}

/* ─── BREADCRUMB ─── */
.breadcrumb {
    background-color: transparent !important;
}

.breadcrumb-item,
.breadcrumb-item a {
    color: var(--text-secondary) !important;
}

.breadcrumb-item.active {
    color: var(--text-muted) !important;
}

/* ─── LIGHT MODE — ajustements spécifiques ─── */
[data-theme="light"] body {
    background-color: #F4F6F9 !important;
}

[data-theme="light"] .sidebar .nav-link {
    color: rgba(232, 226, 217, 0.85) !important;
}

[data-theme="light"] .table thead th {
    background-color: #F8FAFC !important;
    color: #4A5568 !important;
}

[data-theme="light"] h1,
[data-theme="light"] h2,
[data-theme="light"] h3,
[data-theme="light"] h4,
[data-theme="light"] h5,
[data-theme="light"] h6 {
    color: #1A202C !important;
}

[data-theme="light"] .text-muted {
    color: #718096 !important;
}

/* ════════════════════════════════════════════
   BOUTON TOGGLE THÈME
════════════════════════════════════════════ */

.theme-toggle-wrapper {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    z-index: 9999;
}

.theme-toggle-btn {
    position: relative;
    width: 62px;
    height: 32px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 50px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 7px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(0,0,0,0.25);
}

.theme-toggle-btn:hover {
    border-color: var(--gold);
    box-shadow: 0 4px 20px var(--gold-glow);
}

.theme-icon-sun { color: #F6C23E; font-size: .7rem; z-index: 1; }
.theme-icon-moon { color: #8B95A6; font-size: .7rem; z-index: 1; }

.theme-toggle-thumb {
    position: absolute;
    width: 24px; height: 24px;
    background: linear-gradient(135deg, var(--gold), var(--gold-lt));
    border-radius: 50%;
    top: 3px; left: 4px;
    transition: transform 0.35s cubic-bezier(.34,1.56,.64,1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* En mode clair, le thumb glisse à droite */
[data-theme="light"] .theme-toggle-thumb {
    transform: translateX(29px);
}

[data-theme="light"] .theme-icon-sun { color: #F6C23E; }
[data-theme="light"] .theme-icon-moon { color: #CBD5E0; }